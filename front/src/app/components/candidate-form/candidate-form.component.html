<div class="form-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Registro de Candidato</mat-card-title>
      <mat-card-subtitle>Complete la información del candidato y suba el archivo Excel</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="candidateForm" (ngSubmit)="onSubmit()" class="candidate-form">
        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Nombre</mat-label>
            <input 
              matInput 
              formControlName="name" 
              placeholder="Ej: Juan"
              #nameInput
              (focus)="onFieldFocus('name')"
              (blur)="onFieldBlur('name')"
            >
            <mat-icon matSuffix>person</mat-icon>
            <mat-error *ngIf="shouldShowError('name')">
              <span *ngIf="candidateForm.get('name')?.hasError('required')">
                El nombre es requerido
              </span>
              <span *ngIf="candidateForm.get('name')?.hasError('minlength')">
                El nombre debe tener al menos 2 caracteres
              </span>
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Apellido</mat-label>
            <input 
              matInput 
              formControlName="surname" 
              placeholder="Ej: Pérez"
              (focus)="onFieldFocus('surname')"
              (blur)="onFieldBlur('surname')"
            >
            <mat-icon matSuffix>badge</mat-icon>
            <mat-error *ngIf="shouldShowError('surname')">
              <span *ngIf="candidateForm.get('surname')?.hasError('required')">
                El apellido es requerido
              </span>
              <span *ngIf="candidateForm.get('surname')?.hasError('minlength')">
                El apellido debe tener al menos 2 caracteres
              </span>
            </mat-error>
          </mat-form-field>
        </div>

        <div class="file-upload-section">
          <mat-label class="file-label">Archivo Excel requerido</mat-label>
          <div class="file-input-container">
            <input 
              type="file" 
              (change)="onFileSelected($event)" 
              accept=".xlsx,.xls" 
              #fileInput 
              class="file-input"
            >
            <button 
              type="button" 
              mat-raised-button 
              color="primary" 
              (click)="fileInput.click()"
              class="file-button"
            >
              <mat-icon>attach_file</mat-icon>
              Seleccionar Archivo Excel
            </button>
            <span class="file-name">
              {{ selectedFile ? selectedFile.name : 'Ningún archivo seleccionado' }}
            </span>
          </div>
          <mat-hint>El archivo Excel debe contener: Seniority, Years of experience, Availability</mat-hint>
          <mat-error *ngIf="shouldShowError('excelFile')">
            Debe seleccionar un archivo Excel válido
          </mat-error>
        </div>

        <div class="form-actions">
          <button 
            type="submit" 
            mat-raised-button 
            color="primary" 
            [disabled]="!candidateForm.valid"
            class="submit-button"
          >
            <mat-icon>save</mat-icon>
            Guardar Candidato
          </button>
          
          <button 
            type="button" 
            mat-button 
            color="warn" 
            (click)="onClear()"
            class="clear-button"
          >
            <mat-icon>clear</mat-icon>
            Limpiar
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>